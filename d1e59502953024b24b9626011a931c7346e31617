{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ac353d73_c9d0a70a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-07-19T00:57:53Z",
      "side": 1,
      "message": "This is partially incorrect: this is useful in general when there is some replication in place, including a primary-replica setup.",
      "range": {
        "startLine": 9,
        "startChar": 18,
        "endLine": 9,
        "endChar": 37
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c543eb52_2c8403fa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2023-07-19T15:49:43Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ac353d73_c9d0a70a",
      "range": {
        "startLine": 9,
        "startChar": 18,
        "endLine": 9,
        "endChar": 37
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25434721_02718de4",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-07-19T00:57:53Z",
      "side": 1,
      "message": "Can you advise on how this would be used to trigger alerts? Can you suggest some Prometheus expression?",
      "range": {
        "startLine": 11,
        "startChar": 4,
        "endLine": 11,
        "endChar": 45
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ee8189d_3ab002e7",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-07-19T00:57:53Z",
      "side": 1,
      "message": "This does not look right here: if we register two metrics with different repository name, the first will cancel the second?",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 34
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23dca98e_3ba1eccb",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2023-07-19T15:31:54Z",
      "side": 1,
      "message": "The second will cancel the first, but yes, you\u0027re right. Well spotted.",
      "parentUuid": "4ee8189d_3ab002e7",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 34
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4719793b_3ff68cda",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-07-19T18:27:14Z",
      "side": 1,
      "message": "We should make the metric more similar to what the JGit cache metric is doing on a per-repo basis: \n\n```\n    CallbackMetric1\u003cString, Long\u003e repoEnt \u003d\n        metrics.newCallbackMetric(\n            \"jgit/block_cache/cache_used_per_repository\",\n            Long.class,\n            new Description(\n                    \"Bytes of memory retained per repository for the top repositories \"\n                        + \"having most data in the cache.\")\n                .setGauge()\n                .setUnit(\"byte\"),\n            Field.ofProjectName(\"repository_name\")\n                .description(\"The name of the repository.\")\n                .build());\n    metrics.newTrigger(\n        repoEnt,\n        () -\u003e {\n          Map\u003cString, Long\u003e cacheMap \u003d WindowCacheStats.getStats().getOpenByteCountPerRepository();\n          if (cacheMap.isEmpty()) {\n            repoEnt.forceCreate(\"\");\n          } else {\n            cacheMap.entrySet().stream()\n                .sorted(Map.Entry.\u003cString, Long\u003ecomparingByValue().reversed())\n                .limit(MAX_REPO_COUNT)\n                .forEach(e -\u003e repoEnt.set(e.getKey(), e.getValue()));\n            repoEnt.prune();\n          }\n        });\n```",
      "parentUuid": "23dca98e_3ba1eccb",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 34
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41ec0000_8e11289c",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 53,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2023-07-20T21:44:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4719793b_3ff68cda",
      "range": {
        "startLine": 53,
        "startChar": 0,
        "endLine": 53,
        "endChar": 34
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f7200e1_6f3e4be1",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 61,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-07-19T00:57:53Z",
      "side": 1,
      "message": "This should be sanitised in a non-ambiguous name.",
      "range": {
        "startLine": 61,
        "startChar": 71,
        "endLine": 61,
        "endChar": 78
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cd5e8538_fcc73205",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 61,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2023-07-21T15:29:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8f7200e1_6f3e4be1",
      "range": {
        "startLine": 61,
        "startChar": 71,
        "endLine": 61,
        "endChar": 78
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4dd57de8_6b185a19",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 95,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2023-07-06T22:59:04Z",
      "side": 1,
      "message": "Should we use something else than println?",
      "range": {
        "startLine": 95,
        "startChar": 8,
        "endLine": 95,
        "endChar": 15
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b8fe53f0_c441e1e6",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 95,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2023-07-06T23:02:07Z",
      "side": 1,
      "message": "I take it back... I know see that this is defined above to be printed on the stdout and stderr, all good.",
      "parentUuid": "4dd57de8_6b185a19",
      "range": {
        "startLine": 95,
        "startChar": 8,
        "endLine": 95,
        "endChar": 15
      },
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b1f70fc8_abbd6448",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-07-19T00:57:53Z",
      "side": 1,
      "message": "nit: unneeded empty line.",
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d0aaf90_26171c70",
        "filename": "multi-primary/localrefdb.groovy",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1155599
      },
      "writtenOn": "2023-07-20T21:44:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b1f70fc8_abbd6448",
      "revId": "d1e59502953024b24b9626011a931c7346e31617",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}