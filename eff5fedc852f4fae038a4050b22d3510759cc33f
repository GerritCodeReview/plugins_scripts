{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "53365ae3_9ebdbc51",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-01T18:22:59Z",
      "side": 1,
      "message": "Very clever use of the Group backend, well done üëç",
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f80c8069_aedddc26",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-01T18:22:59Z",
      "side": 1,
      "message": "Should we define some _common sense_ defaults here? Example: 50k users, 3 months TTL.",
      "range": {
        "startLine": 30,
        "startChar": 6,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08bd3d3d_40b49f80",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2024-03-01T18:35:09Z",
      "side": 1,
      "message": "shouldn\u0027t it be only TTL, eg, a month, without an entry limit? As we probably want to know how many users were active in a given period, adding an entry limit would mean we cap the active users count and never exceed that value.\n\nWDYT?",
      "parentUuid": "f80c8069_aedddc26",
      "range": {
        "startLine": 30,
        "startChar": 6,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e55f6a6d_8ed0fcda",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-02T02:12:21Z",
      "side": 1,
      "message": "True, but I believe if you don\u0027t define anything, Gerrit will have its default entry limit (1024?)",
      "parentUuid": "08bd3d3d_40b49f80",
      "range": {
        "startLine": 30,
        "startChar": 6,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7273246_3f9c5854",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2024-03-02T08:53:47Z",
      "side": 1,
      "message": "Yes, you\u0027re right, the default entry limit is 1024. How about \"unlimited\" aka `Long.MAX_VALUE`?",
      "parentUuid": "e55f6a6d_8ed0fcda",
      "range": {
        "startLine": 30,
        "startChar": 6,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e1705ca2_1f7fbd9f",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-19T23:54:33Z",
      "side": 1,
      "message": "I would go for something smaller, e.g. 300k users? The largest software company in the world I can think of :-)",
      "parentUuid": "a7273246_3f9c5854",
      "range": {
        "startLine": 30,
        "startChar": 6,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8439578_45de3755",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2024-03-20T09:36:05Z",
      "side": 1,
      "message": "Is this really a problem? The cache entries are tiny, with only two integers (one for the key and one for the timestamp). From the perspective of a Gerrit admin, I\u0027d be more concerned about users being evicted from this cache when it reaches the limit, than the space it consumes on the disk. Also, this being a Groovy script means that one can tailor it to their needs and configure \"proper\" limits.",
      "parentUuid": "e1705ca2_1f7fbd9f",
      "range": {
        "startLine": 30,
        "startChar": 6,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e151f41_e8180978",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 30,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-20T10:33:37Z",
      "side": 1,
      "message": "\u003e Is this really a problem?\n\nYes, some cache backends do a preallocation of the file.\n\n\u003e than the space it consumes on the disk.\n\nUntil you run out of disk space, isn\u0027t it?\n\n\u003e Also, this being a Groovy script means that one can tailor it to their needs and configure \"proper\" limits.\n\nTrue, but I would still use my common-sense for defaults.",
      "parentUuid": "f8439578_45de3755",
      "range": {
        "startLine": 30,
        "startChar": 6,
        "endLine": 30,
        "endChar": 34
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0bcc2024_1da651ed",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-01T18:22:59Z",
      "side": 1,
      "message": "It would be best to not rely on Java serialisation for the persistent cache but just track the long Epoch here, which is more than enough.",
      "range": {
        "startLine": 56,
        "startChar": 52,
        "endLine": 56,
        "endChar": 62
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7436da64_d8fdd055",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2024-03-01T18:22:59Z",
      "side": 1,
      "message": "This won\u0027t work in general: if `CurrentUser` isn\u0027t an identified user, it would throw an exception.\n\n```\n  public Account.Id getAccountId() {\n    throw new UnsupportedOperationException(\n        getClass().getSimpleName() + \" is not an IdentifiedUser\");\n  }\n```\n\nWe need to condition this to `user.isIdentifiedUser()`",
      "range": {
        "startLine": 56,
        "startChar": 30,
        "endLine": 56,
        "endChar": 50
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8877b851_4e7a0369",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2024-03-01T18:35:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0bcc2024_1da651ed",
      "range": {
        "startLine": 56,
        "startChar": 52,
        "endLine": 56,
        "endChar": 62
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "157515d3_4a79bd7b",
        "filename": "admin/track-active-users.groovy",
        "patchSetId": 2
      },
      "lineNbr": 56,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2024-03-01T18:35:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7436da64_d8fdd055",
      "range": {
        "startLine": 56,
        "startChar": 30,
        "endLine": 56,
        "endChar": 50
      },
      "revId": "eff5fedc852f4fae038a4050b22d3510759cc33f",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}